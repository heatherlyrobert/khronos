#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include crond header                 khronos.h                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (EXEC) verify importing and exporting usage lines                  0s   exim            USAGE__import_full, USAGE__export_full                                       ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                prog__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char   *x_name  = "/tmp/khronos.usage";                                                                                                                                                                                    
     exec     purge usage                          USAGE_purge                                                                                                                       i_equal     0                                                                                                    
     exec     remove test file                     yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    0a,    0n,    0x                                                               

   COND       attempt to import a missing file                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call import                          USAGE_import_full           x_name                                                                                                i_lesser    0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    0a,    0n,    0x                                                               
     exec     ... count file lines                 yURG_peek_count             x_name                                                                                                i_lesser    0                                                                                                    

   COND       verify reading an empty file                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     touch the test file                  yURG_touch                  x_name                                                     , "root"   , "root"  , "0600"              i_equal     0                                                                                                    
     exec     ... count file lines                 yURG_peek_count             x_name                                                                                                i_equal     0                                                                                                    
     exec     call import                          USAGE_import_full           x_name                                                                                                i_equal     0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    0a,    0n,    0x                                                               
     exec     ... count file lines                 yURG_peek_count             x_name                                                                                                i_equal     0                                                                                                    

   COND       create an import file                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     system   add lines                            - - - - - - - - - - - - -   echo ¶## usage headder¶                                  > /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶¶                                                 >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶##-t  hr  mn  ---n  -usec¶                        >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶300    5   0   107   1020¶                        >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶301    5   1   108    792¶                        >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶302    5   2   109    758¶                        >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶303    5   3   110    519¶                        >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶##-t  hr  mn  ---n  -usec¶                        >> /tmp/khronos.usage                                                                                                                                            
     system   add lines                            - - - - - - - - - - - - -   echo ¶¶                                                 >> /tmp/khronos.usage                                                                                                                                            
     exec     ... count file lines                 yURG_peek_count             x_name                                                                                                i_equal     9                                                                                                    

   COND       verify reading a small file                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call import                          USAGE_import_full           x_name                                                                                                i_equal     0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    4a,  300n,  303x                                                               
     get      ... review entry                     USAGE__unit                 "entry"               , 299                                                                           s_equal     USAGE entry      :  299,     0ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 300                                                                           s_equal     USAGE entry      :  300,  1020ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 301                                                                           s_equal     USAGE entry      :  301,   792ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 302                                                                           s_equal     USAGE entry      :  302,   758ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 303                                                                           s_equal     USAGE entry      :  303,   519ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 304                                                                           s_equal     USAGE entry      :  304,     0ms                                                                     

   COND       remove the source file                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     remove test file                     yURG_rm                     x_name                                                                                                i_equal     0                                                                                                    
     exec     ... count file lines                 yURG_peek_count             x_name                                                                                                i_lesser    0                                                                                                    

   COND       verify exporting the data                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call export                          USAGE_export_full           x_name                                                                                                i_equal     0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    4a,  300n,  303x                                                               
     exec     ... count file lines                 yURG_peek_count             x_name                                                                                                i_equal     17                                                                                                   

   COND       verify purging and checking                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     purge usage                          USAGE_purge                                                                                                                       i_equal     0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    0a,    0n,    0x                                                               

   COND       verify importing the export file                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call import                          USAGE_import_full           x_name                                                                                                i_equal     0                                                                                                    
     get      review usage count                   USAGE__unit                 "count"               , 0                                                                             s_equal     USAGE count      :    4a,  300n,  303x                                                               
     get      ... review entry                     USAGE__unit                 "entry"               , 299                                                                           s_equal     USAGE entry      :  299,     0ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 300                                                                           s_equal     USAGE entry      :  300,  1020ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 301                                                                           s_equal     USAGE entry      :  301,   792ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 302                                                                           s_equal     USAGE entry      :  302,   758ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 303                                                                           s_equal     USAGE entry      :  303,   519ms                                                                     
     get      ... review entry                     USAGE__unit                 "entry"               , 304                                                                           s_equal     USAGE entry      :  304,     0ms                                                                     

   COND       wrap up testing                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap up                              prog__unit_end                                                                                                                    i_equal     0                                                                                                    



# end-of-file.  done, finito, completare, whimper [Ï´···
